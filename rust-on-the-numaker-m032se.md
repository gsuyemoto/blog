<h1>Rust on the NuMaker M032SE</h1>
<p>After doing some work on the Raspi with Rust, I decided I wanted to try a board that wasn't as ubiquitous. I found a company called Nuvoton that had some IoT boards based on the ARM Cortex chips, which was definitely a requirement.</p><p>I settled on the NuMaker M032SE mainly because I could get it easily from Digikey which has historically been very fast and pretty cheap to ship. Normally, I seem to get my orders from Digikey in a couple of days. In the future, if this board works out, I would like to check out some of Nuvoton's newer development boards and sensors.</p><p>Things you'll need for this project:</p><!--kg-card-begin: markdown--><ol>\
<li>NuMaker M032SE Dev Board (I got it from <a href="https://www.digikey.com/en/products/detail/nuvoton-technology-corporation-of-america/NK-M032SE/12337437">Digikey</a>)</li>\
<li>Rust - You can get the install script <a href="https://www.rust-lang.org/tools/install">here</a></li>\
<li><a href="https://github.com/OpenNuvoton/OpenOCD-Nuvoton">OpenOCD</a> (Custom Nuvoton version)</li>\
<li>GDB (Optional)</li>\
<li>Micro USB cable that carries data and power (some only do power)</li>\
<li>Ubuntu (most Debian distros can follow along fine I would think)</li>\
</ol>\
<!--kg-card-end: markdown--><p>Step</p><p>We need to make sure Clang is installed in order to use Rust <a href="https://rust-lang.github.io/rust-bindgen/">Bindgen</a>. Bindgen will automatically generate all C bindings for the C libraries needed for this project (specifically, NuMicro.c).</p><!--kg-card-begin: markdown--><p><code>sudo apt-get install llvm-dev libclang-dev clang</code></p>\
<!--kg-card-end: markdown--><p>Step</p><p>Install some needed Rust crates:</p><!--kg-card-begin: markdown--><p><code>cargo install svd2rust form</code></p>\
<!--kg-card-end: markdown--><p>Step 1</p><p>Make sure you execute openocd as sudo!</p><!--kg-card-begin: markdown--><p><code>sudo openocd -f interface/nulink.cfg -f target/numicroM0.cfg</p>\
<!--kg-card-end: markdown--><p>Step 2</p><p>If you want to use GDB then you need to have <a href="https://packages.ubuntu.com/bionic/gdb-multiarch">gdb-multiarch</a> installed. Not to be confused with the standard version of gdb. Although, if you want to just flash the program to the board, this is not needed. See Step 2A.</p><!--kg-card-begin: markdown--><p><code>gdb-multiarch -q target/thumbv6m-none-eabi/debug/examples/hello<br>\
(gdb) target remote :333</code></p>\
<!--kg-card-end: markdown--><p>Maybe try arm-none-eabi-gdb.</p><p>Step 2A (Flashing only)</p><p>If you only want to flash the program to the board, you can just use openocd to do <a href="http://openocd.org/doc/html/Flash-Programming.html">this</a>:</p><!--kg-card-begin: markdown--><p><code>openocd -f interface/nulink.cfg -f target/numicroM0.cfg -c &quot;program filename.elf verify reset exit&quot;</code></p>\
<!--kg-card-end: markdown--><p>NOTE: filename.elf is the name of the release/debug executable built with 'cargo build' and will not have the .elf extension on the file. I left this in the command above, but in the actual command it would just be the filename.</p><p>Currently, there are no PAC (Peripheral Access Crate) for the M032SE from Nuvoton â€“ as far as I could tell. Because of this, you will have a good ol' time accessing the GPIOs for instance. Therefore, I used the Rust crate <a href="https://crates.io/crates/svd2rust">SVD2Rust</a> in order to create a mapping from the corrresponding SVD file. I found the SVD file by going <a href="https://developer.arm.com/tools-and-software/embedded/cmsis/cmsis-packs">here</a> and downloading the board pack (I think these .packs are for use with the Keil IDE). After downloading the .pack file, I renamed the file to packfile.zip and then just unzipped it. In the zip is a folder named 'SVD.'</p>
